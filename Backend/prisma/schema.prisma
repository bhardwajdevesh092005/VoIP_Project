datasource db{
    provider = "postgresql"
    url = env("POSTGRESS_URL")
}

generator client{
    provider = "prisma-client-js"
}

model User{
    userID Int @id @default(autoincrement())
    fullName String 
    email String @unique
    password String? @default("")
    refreshToken String?
    profilePicture String?
    sentRequests ContactRequest[] @relation("SentRequests")
    recievedRequests ContactRequest[] @relation("RecievedRequests")
    isGoogleAuth Boolean
    isEmailAuth Boolean
    callHistory call[] 
    updatedAt DateTime @updatedAt
    ceatedAt DateTime @default(now())
} 

model ContactRequest{
    requestId Int @id @default(autoincrement())
    senderId Int 
    recieverId Int
    fromUser User @relation("SentRequests",fields: [senderId], references: [userID])
    toUser User @relation("RecievedRequests",fields: [recieverId], references: [userID])
    status Int
    createdOn DateTime @default(now())
}       

model call{
    callId Int @id @default(autoincrement())
    users User[]
    duration Int
    startTime DateTime
    endTime DateTime
}

model otp{
    email String @unique
    otp Int
    createdAt DateTime @default(now())
    updatedAt DateTime @updatedAt
}